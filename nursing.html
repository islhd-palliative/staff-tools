<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Senior Nursing Leave Calendar 2026 - ISLHD Palliative Care</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            color: #0d9488;
            font-size: 1.5rem;
            margin-bottom: 8px;
        }

        .subtitle {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .last-updated {
            color: #999;
            font-size: 0.8rem;
            margin-bottom: 20px;
        }

        .controls {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            margin-bottom: 20px;
            align-items: center;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .control-group label {
            font-weight: 500;
            font-size: 0.9rem;
        }

        select {
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .legend {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            margin-bottom: 20px;
            padding: 12px 16px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85rem;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }

        .legend-color.annual { background: #3b82f6; }
        .legend-color.lsl { background: #8b5cf6; }
        .legend-color.lwop { background: #6b7280; }

        .calendar-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 20px;
        }

        .month-header {
            background: linear-gradient(135deg, #0d9488, #14b8a6);
            color: white;
            padding: 16px 20px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: 180px repeat(7, 1fr);
            font-size: 0.8rem;
        }

        .calendar-header {
            background: #f1f5f9;
            padding: 8px;
            text-align: center;
            font-weight: 600;
            color: #475569;
            border-bottom: 1px solid #e2e8f0;
        }

        .calendar-header.name-col {
            text-align: left;
            padding-left: 12px;
        }

        .staff-name {
            padding: 8px 12px;
            font-weight: 500;
            color: #1e293b;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .staff-role {
            font-size: 0.7rem;
            color: #64748b;
            font-weight: 400;
        }

        .day-cell {
            padding: 4px;
            text-align: center;
            border-bottom: 1px solid #f1f5f9;
            border-right: 1px solid #f8fafc;
            min-height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .day-cell.weekend {
            background: #f9fafb;
        }

        .day-cell.has-leave {
            position: relative;
        }

        .leave-badge {
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
            color: white;
        }

        .leave-badge.annual { background: #3b82f6; }
        .leave-badge.lsl { background: #8b5cf6; }
        .leave-badge.lwop { background: #6b7280; }

        .week-row {
            display: contents;
        }

        .week-row:hover .staff-name,
        .week-row:hover .day-cell {
            background: #f0fdfa;
        }

        /* Role group headers */
        .role-group-header {
            grid-column: 1 / -1;
            background: #e2e8f0;
            padding: 8px 12px;
            font-weight: 600;
            color: #475569;
            font-size: 0.85rem;
        }

        /* Summary section */
        .summary-section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }

        .summary-section h2 {
            color: #0d9488;
            font-size: 1.1rem;
            margin-bottom: 16px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
        }

        .summary-card {
            background: #f8fafc;
            border-radius: 8px;
            padding: 12px 16px;
        }

        .summary-card h3 {
            font-size: 0.8rem;
            color: #64748b;
            margin-bottom: 4px;
        }

        .summary-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #0d9488;
        }

        .summary-value.warning {
            color: #f59e0b;
        }

        .summary-value.critical {
            color: #ef4444;
        }

        /* Staff filter dropdown styling */
        .staff-chip {
            display: inline-block;
            padding: 4px 10px;
            background: #e0f2fe;
            color: #0369a1;
            border-radius: 16px;
            font-size: 0.8rem;
            margin: 2px;
        }

        .staff-chip.np { background: #dbeafe; color: #1e40af; }
        .staff-chip.cnc { background: #dcfce7; color: #166534; }
        .staff-chip.cns2 { background: #fef3c7; color: #92400e; }
        .staff-chip.num { background: #f3e8ff; color: #7c3aed; }
        .staff-chip.nm2 { background: #ffe4e6; color: #be123c; }

        /* Print styles */
        @media print {
            body { padding: 10px; }
            .controls { display: none; }
            .calendar-container { box-shadow: none; }
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            color: #999;
            font-size: 0.8rem;
        }

        .footer a {
            color: #0d9488;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Senior Nursing Leave Calendar 2026</h1>
    <p class="subtitle">ISLHD Palliative and End of Life Care (CC182605)</p>
    <p class="last-updated">Last updated: 20 January 2026</p>

    <div class="controls">
        <div class="control-group">
            <label for="roleFilter">Filter by role:</label>
            <select id="roleFilter">
                <option value="all">All Staff</option>
                <option value="NP">Nurse Practitioners</option>
                <option value="CNC">Clinical Nurse Consultants</option>
                <option value="CNS2">Clinical Nurse Specialists</option>
                <option value="NUM">Nurse Unit Managers</option>
            </select>
        </div>
        <div class="control-group">
            <label for="monthFilter">Jump to:</label>
            <select id="monthFilter">
                <option value="0">January 2026</option>
                <option value="1">February 2026</option>
                <option value="2">March 2026</option>
                <option value="3">April 2026</option>
                <option value="4">May 2026</option>
                <option value="5">June 2026</option>
                <option value="6">July 2026</option>
                <option value="7">August 2026</option>
                <option value="8">September 2026</option>
                <option value="9">October 2026</option>
                <option value="10">November 2026</option>
                <option value="11">December 2026</option>
                <option value="12">January 2027</option>
            </select>
        </div>
    </div>

    <div class="legend">
        <div class="legend-item">
            <div class="legend-color annual"></div>
            <span>Annual Leave</span>
        </div>
        <div class="legend-item">
            <div class="legend-color lsl"></div>
            <span>Long Service Leave</span>
        </div>
        <div class="legend-item">
            <div class="legend-color lwop"></div>
            <span>Leave Without Pay</span>
        </div>
    </div>

    <div id="summarySection" class="summary-section">
        <h2>This Week's Summary</h2>
        <div class="summary-grid" id="summaryGrid"></div>
    </div>

    <div id="calendarContainer"></div>

    <div class="footer">
        Built for Ashlie by Ben with help from Claude
    </div>

    <script>
        // Staff data
        const staffData = [
            { name: 'Gillies, Teresa', role: 'NP', fte: 1.0 },
            { name: 'Glavan, Mira', role: 'NP', fte: 0.84 },
            { name: 'Turner, Jacqueline', role: 'NP', fte: 1.0 },
            { name: 'Heufel, Melissa', role: 'CNC', fte: 0.74 },
            { name: 'Hood, Lucy', role: 'CNC', fte: 1.0 },
            { name: 'Micovska, Liz', role: 'CNC', fte: 0.84 },
            { name: 'Purkiss, Amy', role: 'CNC', fte: 0.74 },
            { name: 'Womsley, Kerrie', role: 'CNC', fte: 1.0 },
            { name: 'Wurth, Kathleen', role: 'CNC', fte: 0.84 },
            { name: 'Adeniyi, Bukola', role: 'CNS2', fte: 0.84 },
            { name: 'Hagen, Susan', role: 'CNS2', fte: 0.84 },
            { name: 'Jenkins, Susan', role: 'NM2', fte: 1.0 },
            { name: 'Jung, Young', role: 'CNS2', fte: 0.63 },
            { name: 'Kulyk, Claire', role: 'CNS2', fte: 0.84 },
            { name: 'McBride, Emily', role: 'CNS2', fte: 1.0 },
            { name: 'Perry, Rebecca', role: 'CNS2', fte: 1.0 },
            { name: 'Price, Kirsty', role: 'CNS2', fte: 0.63 },
            { name: 'Rawson, Sandra', role: 'CNS2', fte: 0.63 },
            { name: 'Walker, Claire', role: 'CNS2', fte: 0.37 },
            { name: 'Watson, Gemma', role: 'CNS2', fte: 0.63 },
            { name: 'Zhang, Annie', role: 'CNS2', fte: 1.0 },
            { name: 'Barnaba, Allison', role: 'NUM', fte: 0.47 },
            { name: 'Morrison, Chenelle', role: 'NUM', fte: 1.0 },
            { name: 'Tatton, Charmaine', role: 'NUM', fte: 0.84 },
            { name: 'Wheatley, Nicole', role: 'NUM', fte: 0.58 }
        ];

        // Leave data - week starting dates with leave entries
        // Format: 'YYYY-MM-DD': { staffIndex: leaveType }
        // Leave types: 'AL' (annual), 'LSL', 'LWOP'
        const leaveData = {
            // Week of 5 Jan 2026
            '2026-01-05': { 7: 'LSL', 12: 'AL', 18: 'AL' },
            // Week of 12 Jan 2026
            '2026-01-12': { 7: 'LSL', 12: 'AL', 18: 'AL' },
            // Week of 19 Jan 2026
            '2026-01-19': { 7: 'LSL', 12: 'AL', 18: 'AL' },
            // Week of 26 Jan 2026
            '2026-01-26': { 7: 'LSL', 8: 'AL', 9: 'AL', 18: 'AL' },
            // Week of 2 Feb 2026
            '2026-02-02': { 7: 'LSL', 8: 'AL', 9: 'AL', 11: 'AL', 18: 'AL', 21: 'AL' },
            // Week of 9 Feb 2026
            '2026-02-09': { 2: 'AL', 4: 'AL', 7: 'LSL', 8: 'AL', 9: 'AL', 11: 'AL', 17: 'AL', 18: 'AL', 21: 'AL' },
            // Week of 16 Feb 2026
            '2026-02-16': { 4: 'AL', 7: 'LSL', 17: 'AL', 18: 'LSL', 21: 'AL', 22: 'AL' },
            // Week of 23 Feb 2026
            '2026-02-23': { 4: 'AL', 7: 'LSL', 8: 'LSL', 18: 'LSL', 21: 'LSL' },
            // Week of 2 Mar 2026
            '2026-03-02': { 7: 'LSL', 8: 'LSL', 18: 'LSL', 21: 'LSL' },
            // Week of 9 Mar 2026
            '2026-03-09': { 7: 'LSL', 8: 'LSL', 18: 'LSL', 21: 'LSL' },
            // Week of 16 Mar 2026
            '2026-03-16': { 7: 'LSL', 8: 'LSL', 18: 'LSL', 21: 'LSL', 23: 'AL' },
            // Week of 23 Mar 2026
            '2026-03-23': { 2: 'AL', 7: 'LSL', 18: 'LSL', 23: 'AL' },
            // Week of 30 Mar 2026
            '2026-03-30': { 2: 'AL', 7: 'LSL', 18: 'LSL' },
            // Week of 6 Apr 2026
            '2026-04-06': { 7: 'LSL', 18: 'LSL', 20: 'AL' },
            // Week of 13 Apr 2026
            '2026-04-13': { 7: 'LSL', 18: 'LSL' },
            // Week of 20 Apr 2026
            '2026-04-20': { 7: 'LSL', 18: 'LSL' },
            // Week of 27 Apr 2026
            '2026-04-27': { 7: 'LSL', 18: 'LSL' },
            // Week of 4 May 2026
            '2026-05-04': { 18: 'LSL' },
            // Week of 11 May 2026
            '2026-05-11': { 18: 'LSL' },
            // Week of 18 May 2026
            '2026-05-18': { 18: 'LSL' },
            // Week of 25 May 2026
            '2026-05-25': { 18: 'LSL' },
            // Week of 1 Jun 2026
            '2026-06-01': { 18: 'LSL' },
            // Week of 8 Jun 2026
            '2026-06-08': { 18: 'LSL' },
            // Week of 15 Jun 2026
            '2026-06-15': { 4: 'AL', 18: 'LSL' },
            // Week of 22 Jun 2026
            '2026-06-22': { 4: 'AL', 18: 'LSL' },
            // Week of 29 Jun 2026
            '2026-06-29': { 18: 'LSL', 20: 'AL', 22: 'AL' },
            // Week of 6 Jul 2026
            '2026-07-06': { 18: 'LSL' },
            // Week of 13 Jul 2026
            '2026-07-13': { 18: 'LSL' },
            // Week of 20 Jul 2026
            '2026-07-20': { 18: 'LSL' },
            // Week of 27 Jul 2026
            '2026-07-27': { 18: 'LSL' },
            // Week of 3 Aug 2026
            '2026-08-03': { 18: 'LSL' },
            // Week of 10 Aug 2026
            '2026-08-10': { 18: 'LSL' },
            // Week of 17 Aug 2026
            '2026-08-17': { 18: 'LSL' },
            // Week of 24 Aug 2026
            '2026-08-24': { 18: 'LWOP' },
            // Week of 31 Aug 2026
            '2026-08-31': { 18: 'LWOP' },
            // Week of 7 Sep 2026
            '2026-09-07': { 18: 'LWOP' },
            // Week of 14 Sep 2026
            '2026-09-14': { 18: 'LWOP' },
            // Week of 21 Sep 2026
            '2026-09-21': { 18: 'LWOP', 20: 'AL', 23: 'AL' },
            // Week of 28 Sep 2026
            '2026-09-28': { 23: 'AL' },
            // Week of 26 Oct 2026
            '2026-10-26': { 16: 'AL' },
            // Week of 2 Nov 2026
            '2026-11-02': { 16: 'AL' },
            // Week of 14 Dec 2026
            '2026-12-14': { 16: 'AL' },
            // Week of 21 Dec 2026
            '2026-12-21': { 16: 'AL' }
        };

        const roleNames = {
            'NP': 'Nurse Practitioner',
            'CNC': 'Clinical Nurse Consultant',
            'CNS2': 'Clinical Nurse Specialist Grade 2',
            'NUM': 'Nurse Unit Manager',
            'NM2': 'Nurse Manager Grade 2'
        };

        const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                           'July', 'August', 'September', 'October', 'November', 'December'];

        const dayNames = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];

        function formatDateKey(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        function getWeekStart(date) {
            const d = new Date(date);
            const day = d.getDay();
            const diff = d.getDate() - day + (day === 0 ? -6 : 1); // Monday
            d.setDate(diff);
            return d;
        }

        function getLeaveForWeek(weekStart, staffIndex) {
            const key = formatDateKey(weekStart);
            if (leaveData[key] && leaveData[key][staffIndex]) {
                return leaveData[key][staffIndex];
            }
            return null;
        }

        function renderCalendar() {
            const container = document.getElementById('calendarContainer');
            const roleFilter = document.getElementById('roleFilter').value;

            let filteredStaff = staffData.map((s, i) => ({ ...s, index: i }));
            if (roleFilter !== 'all') {
                filteredStaff = filteredStaff.filter(s => s.role === roleFilter || (roleFilter === 'NUM' && s.role === 'NM2'));
            }

            // Group by role
            const roles = ['NP', 'CNC', 'CNS2', 'NM2', 'NUM'];
            const grouped = {};
            roles.forEach(r => {
                grouped[r] = filteredStaff.filter(s => s.role === r);
            });

            let html = '';

            // Generate months
            for (let m = 0; m <= 12; m++) {
                const year = m < 12 ? 2026 : 2027;
                const month = m < 12 ? m : 0;
                const monthStart = new Date(year, month, 1);
                const monthEnd = new Date(year, month + 1, 0);

                html += `<div class="calendar-container" id="month-${m}">`;
                html += `<div class="month-header">${monthNames[month]} ${year}</div>`;
                html += `<div class="calendar-grid">`;

                // Header row
                html += `<div class="calendar-header name-col">Staff Member</div>`;

                // Get weeks in this month
                let weekStart = getWeekStart(monthStart);
                const weeks = [];
                while (weekStart <= monthEnd) {
                    weeks.push(new Date(weekStart));
                    weekStart.setDate(weekStart.getDate() + 7);
                }

                // Week headers
                weeks.forEach(w => {
                    const weekEnd = new Date(w);
                    weekEnd.setDate(weekEnd.getDate() + 6);
                    const startDay = w.getDate();
                    const endDay = weekEnd.getDate();
                    const startMonth = w.getMonth() === month ? '' : monthNames[w.getMonth()].substring(0, 3) + ' ';
                    const endMonth = weekEnd.getMonth() === month ? '' : monthNames[weekEnd.getMonth()].substring(0, 3) + ' ';
                    html += `<div class="calendar-header">${startMonth}${startDay}-${endMonth}${endDay}</div>`;
                });

                // Pad to 7 columns if needed
                for (let i = weeks.length; i < 7; i++) {
                    html += `<div class="calendar-header"></div>`;
                }

                // Staff rows grouped by role
                roles.forEach(role => {
                    if (grouped[role] && grouped[role].length > 0) {
                        html += `<div class="role-group-header">${roleNames[role] || role}</div>`;

                        grouped[role].forEach(staff => {
                            html += `<div class="week-row">`;
                            html += `<div class="staff-name">${staff.name.split(',')[1]?.trim() || ''} ${staff.name.split(',')[0]}<span class="staff-role">${staff.fte} FTE</span></div>`;

                            weeks.forEach(w => {
                                const leave = getLeaveForWeek(w, staff.index);
                                if (leave) {
                                    const leaveClass = leave === 'LSL' ? 'lsl' : leave === 'LWOP' ? 'lwop' : 'annual';
                                    html += `<div class="day-cell has-leave"><span class="leave-badge ${leaveClass}">${leave}</span></div>`;
                                } else {
                                    html += `<div class="day-cell"></div>`;
                                }
                            });

                            // Pad to 7 columns
                            for (let i = weeks.length; i < 7; i++) {
                                html += `<div class="day-cell"></div>`;
                            }

                            html += `</div>`;
                        });
                    }
                });

                html += `</div></div>`;
            }

            container.innerHTML = html;
            updateSummary();
        }

        function updateSummary() {
            const today = new Date();
            const weekStart = getWeekStart(today);
            const key = formatDateKey(weekStart);

            let onLeaveCount = 0;
            let lslCount = 0;
            let totalFteOnLeave = 0;

            if (leaveData[key]) {
                Object.entries(leaveData[key]).forEach(([staffIdx, leaveType]) => {
                    onLeaveCount++;
                    if (leaveType === 'LSL') lslCount++;
                    totalFteOnLeave += staffData[parseInt(staffIdx)].fte;
                });
            }

            const totalFte = staffData.reduce((sum, s) => sum + s.fte, 0);
            const availableFte = totalFte - totalFteOnLeave;
            const percentAvailable = Math.round((availableFte / totalFte) * 100);

            const summaryClass = percentAvailable < 70 ? 'critical' : percentAvailable < 85 ? 'warning' : '';

            document.getElementById('summaryGrid').innerHTML = `
                <div class="summary-card">
                    <h3>Total Staff</h3>
                    <div class="summary-value">${staffData.length}</div>
                </div>
                <div class="summary-card">
                    <h3>On Leave This Week</h3>
                    <div class="summary-value ${onLeaveCount > 3 ? 'warning' : ''}">${onLeaveCount}</div>
                </div>
                <div class="summary-card">
                    <h3>FTE Available</h3>
                    <div class="summary-value ${summaryClass}">${availableFte.toFixed(1)} / ${totalFte.toFixed(1)}</div>
                </div>
                <div class="summary-card">
                    <h3>Capacity</h3>
                    <div class="summary-value ${summaryClass}">${percentAvailable}%</div>
                </div>
            `;
        }

        function scrollToMonth(monthIndex) {
            const element = document.getElementById(`month-${monthIndex}`);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // Event listeners
        document.getElementById('roleFilter').addEventListener('change', renderCalendar);
        document.getElementById('monthFilter').addEventListener('change', (e) => {
            scrollToMonth(parseInt(e.target.value));
        });

        // Initial render
        renderCalendar();

        // Set current month in dropdown
        const currentMonth = new Date().getMonth();
        document.getElementById('monthFilter').value = currentMonth;
    </script>
</body>
</html>
